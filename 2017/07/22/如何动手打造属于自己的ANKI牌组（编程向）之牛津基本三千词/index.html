<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>如何动手打造属于自己的 ANKI 牌组（编程向）之牛津基本三千词 - AC Better&#39;s Blog | 小君博客。</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">






<link rel="icon" href="/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="/css/style.css">
<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    AC Better
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">归档</a>
            
            <a class="navbar-item "
               href="/about">关于</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" href="https://github.com/acbetter">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            如何动手打造属于自己的 ANKI 牌组（编程向）之牛津基本三千词
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2017-07-22T03:11:00.000Z" itemprop="datePublished">1 年前</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/折腾/">折腾</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            34 分钟 读完 (约 5060 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>自己制作的 Anki 牌组，才是最适合自己的。</p>
<a id="more"></a>
<blockquote>
<p>本文假定你会这些，包括但不仅限于：</p>
<ul>
<li><p>爬虫知识：Python 及其各种库，如 Requests 、BeautifulSoup 等</p>
</li>
<li><p>前端知识：Html Css （JavaScript 可选）</p>
</li>
<li><p>Anki知识：理解 Anki 原理，熟练使用 Anki 软件</p>
</li>
</ul>
<p>除此以为，你可能还需要一些动手能力，并且能够熟读 Anki 文档</p>
</blockquote>
<h2 id="干货"><a href="#干货" class="headerlink" title="干货"></a>干货</h2><blockquote>
<p>为什么把干货写在最前面？因为大部分人不会看到本文最后，甚至就不会看到第二小节。这就是碎片化阅读时代的悲哀。浮躁～那些想看代码的，就看到最后吧；不想看代码的，看完干货就可以放下手机去刷卡了。</p>
</blockquote>
<p>经验之谈：</p>
<ul>
<li>适合自己的牌组才是最好的。我做出的牌组你不一定认为好，但是这牌组的确最适合我。在当今时代，每个人都应该有自己的工作流，也应该打造为自己量身定制牌组。</li>
<li>坚持。人们总是太贪婪了，背着自己碗里的牌组，却又被别人的牌组所吸引，生怕错过。在这个信息爆炸的时代，我们要一步一个脚印，坚持走自己的路，背属于自己的卡片。我相信你们总有这样的过程：看到别人发的资源，保存好。然后你真的会打开吗？即便是打开了，又全都吃透了？所以请你不要半途而废，你既然精挑细选，选择了你的牌组，你就要把它背完，坚持背完。不忘初心，方得始终。</li>
<li>面对他人的质疑，你要相信自己，并站出来勇敢面对，为自己打气，并认真思考他人的质疑。大家看到我这套牌组，肯定最想质疑我这些问题：<ul>
<li>卡片内容过多，你有耐心看完吗？<ul>
<li>答：我当时也觉得卡片的内容是有点多，所以我转换了学习策略：<ul>
<li>增加学习时间。每天使用至少早晨两个小时时间（这对于习惯使用大块时间学习，碎片化时间娱乐的我来说很正常）</li>
<li>第一次过卡片的时候详细过，掌握每一个用法。没错，每一个用法，因为我用的词典是牛津学习者词典，上面的用法每一条都很重要，对构建单词网络起到决定性作用。</li>
<li>复习的时候粗略地过。如果忘记，打回去再详细地过一遍。</li>
<li>过卡片的过程中随时调整进度和卡片内容。必要时对内容进行删减，节约时间以达到效率和内容的最大平衡点。</li>
</ul>
</li>
<li>PS：我觉得大家之所以会有这个问题是因为我们对 Anki 这款软件的定位很不一样。Anki 是记忆软件，对我而言又是词典软件。我用 Anki 背词典，肯定要把词典里的内容全背完咯～但是背哪些部分，我会按情况和进度挑选出来的。毕竟，活学活用嘛～</li>
</ul>
</li>
<li>一个单词有多条音频，你真的会认真听吗？<ul>
<li>答：会啊。因为我不仅仅是为了背单词而背单词，我还有一个强烈的愿望——看美剧。由于美剧里面各种口音乱飞，所以我不仅要掌握标准美音，还要能听懂各种口音。当然，第一遍过的时候全听留个印象就好了。</li>
</ul>
</li>
<li>你的野心很大啊。能成功背完吗？<ul>
<li>答：那些想要改变世界的人，往往都改变了世界或是差一点改变世界。而那些只想要混一份工资的人，往往连份工资都混不上。理想很丰满，现实的确很骨感，但是我愿意付出刷完牌组所需的代价。而你呢？请不要把你的懒惰移植到我的身上，因为我从不懒惰。</li>
<li>PS：而这份牛津三千只是我学习英语路上的一小步，我不仅在背三千词，而且还在从多个角度攻破英语瓶颈。我想告诉你：营造纯英文环境对学习英语至关重要。当你的手机、电脑、教材、书籍、甚至电视剧都是英文的时候，你不背单词，你不学英语？你活不下去的。</li>
</ul>
</li>
<li>还在看基础3000的人，你觉得能看懂英英词典吗？能看懂英英词典的人，还要看3000吗？<ul>
<li>答：本词典源由于是牛津初学者简单词典，我确实能看懂，但是并不意味着我能看懂牛津英英词典啊，尴尬。可能我的英语水平处在一个比较尴尬的状态，牛津三千可能过了两千以上词。但是就差那么一千，让我拿不起牛津英英词典。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="写在教程前面的话"><a href="#写在教程前面的话" class="headerlink" title="写在教程前面的话"></a>写在教程前面的话</h2><p>大家好，我是 acbetter，从小酷爱折腾，生命不息折腾不止。这不，最近又折腾上了 DIY Anki 牌组，乐此不彼。苦于网上大多数牌组都是使用傻瓜式软件一键生成的，使用编程生成牌组的教程少之可怜，所以我打算出一个伪教程，记录我使用编程 DIY Anki 牌组的过程。</p>
<p><strong>注意：本教程并非详细教程，看完之后只能告诉你使用编程生成牌组的逻辑，方便你知道一步一步你都需要做什么，而不是让你照搬硬套。毕竟，八仙过海，各显神通嘛～</strong></p>
<p>为什么我要做牛津三千词？理由很简单，我选词典的时候最终选择了牛津英英词典，而牛津词典上绝大多数词的定义都是由这三千个词解释的。比如<code>achieve</code>的定义<code>achieve something to succeed in reaching a particular goal, status, or standard, especially by making an effort for a long time</code>其中的每一个词都出现在牛津三千里。所以我把牛津三千背完之后，就可以抛弃英汉词典，直接使用牛津英英词典了。你也可以选择适合自己的词典，毕竟，适合自己的才是最好的～</p>
<p>想先看一眼效果？满足你！</p>
<p><img src="/assets/img/QQ20170729-132358.png" alt="QQ20170729-132358"></p>
<h2 id="获得单词列表"><a href="#获得单词列表" class="headerlink" title="获得单词列表"></a>获得单词列表</h2><p>你要背哪些词呢？这是一个严肃的问题。我选择了<a href="http://www.oxfordlearnersdictionaries.com/us/wordlist/american_english/oxford3000/Oxford3000_A-B/" target="_blank" rel="noopener">牛津三千</a>并谷歌搜索到了它的地址，由于词太多了，我懒得一条一条复制过来，就写了个爬虫爬下来，顺便也把单词<a href="http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1" target="_blank" rel="noopener">释义</a>的地址也爬下来，方便接下来获取单词释义、发音等信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a1_get_3000_words_list.py</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="string">'''Ready to Get'''</span></span><br><span class="line">url_us = <span class="string">'http://www.oxfordlearnersdictionaries.com/us/wordlist/american_english/oxford3000/Oxford3000_A-B/'</span></span><br><span class="line">url_uk = <span class="string">'http://www.oxfordlearnersdictionaries.com/uk/wordlist/american_english/oxford3000/Oxford3000_A-B/'</span></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">cookies = &#123;<span class="string">'oup-cookie'</span>: <span class="string">'true'</span>,</span><br><span class="line">           <span class="string">'JSESSIONID'</span>: <span class="string">'9A3D476A9725353A4CDDD5D5D0E1841B'</span>,</span><br><span class="line">           <span class="string">'__qca'</span>: <span class="string">'P0-918953595-1500593442598'</span>,</span><br><span class="line">           <span class="string">'dictionary'</span>: <span class="string">'english'</span>,</span><br><span class="line">           <span class="string">'_ga'</span>: <span class="string">'GA1.2.448180626.1500593443'</span>,</span><br><span class="line">           <span class="string">'_gid'</span>: <span class="string">'GA1.2.928219780.1500593443'</span></span><br><span class="line">           &#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) '</span></span><br><span class="line">                         <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">'''Let's Start'''</span></span><br><span class="line">url = url_us  <span class="comment"># You can choose to use US or UK define and pronounce</span></span><br><span class="line">r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers)</span><br><span class="line">soup = BeautifulSoup(r.text, <span class="string">"html5lib"</span>)</span><br><span class="line">print(soup.prettify())</span><br><span class="line"></span><br><span class="line"><span class="string">'''Get url_list'''</span></span><br><span class="line">url_list = [url]</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.find(id=<span class="string">"entries-selector"</span>).find_all(<span class="string">'a'</span>):</span><br><span class="line">    print(tag[<span class="string">'href'</span>])</span><br><span class="line">    url_list.extend([tag[<span class="string">'href'</span>]])</span><br><span class="line"><span class="comment"># url_list = ['http://xxxxx/oxford3000/Oxford3000_A-B/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_C-D/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_E-G/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_H-K/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_L-N/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_O-P/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_Q-R/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_S/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_T/',</span></span><br><span class="line"><span class="comment">#             'http://xxxxx/oxford3000/Oxford3000_U-Z/']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''Get 3000 Words'''</span></span><br><span class="line">oxford_3000 = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> url_list:</span><br><span class="line">    url = i</span><br><span class="line">    print(url)  <span class="comment"># url = 'http://xxxxx/oxford3000/Oxford3000_A-B/'</span></span><br><span class="line">    r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers)</span><br><span class="line">    soup = BeautifulSoup(r.text, <span class="string">"html5lib"</span>)</span><br><span class="line">    <span class="string">'''Get first page words for A-B or C-D'''</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> soup.find(id=<span class="string">"entrylist1"</span>).find_all(<span class="string">'a'</span>):</span><br><span class="line">        oxford_3000[k.text] = k[<span class="string">'href'</span>]</span><br><span class="line">    <span class="string">'''Get other pages words like: Oxford3000_A-B/?page=2'''</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> soup.find(id=<span class="string">"paging"</span>).find_all(<span class="string">'a'</span>):</span><br><span class="line">        url = j[<span class="string">'href'</span>]</span><br><span class="line">        print(url)  <span class="comment"># url = 'http://xxxxxx/oxford3000/Oxford3000_A-B/?page=2'</span></span><br><span class="line">        r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers)</span><br><span class="line">        soup = BeautifulSoup(r.text, <span class="string">"html5lib"</span>)</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> soup.find(id=<span class="string">"entrylist1"</span>).find_all(<span class="string">'a'</span>):</span><br><span class="line">            oxford_3000[k.text] = k[<span class="string">'href'</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">'''Print Words'''</span></span><br><span class="line">print(oxford_3000)</span><br><span class="line">print(len(oxford_3000))</span><br><span class="line"></span><br><span class="line"><span class="string">'''Save To File'''</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'oxford_3000_&lt;a&gt;.txt'</span>, <span class="string">'w+'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> oxford_3000.items():</span><br><span class="line">        file.write(<span class="string">','</span>.join([key, value]))</span><br><span class="line">        file.write(<span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<p>爬下来的文件前五行：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># oxford_3000_&lt;a&gt;.txt</span></span><br><span class="line">a,http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1</span><br><span class="line">abandon,http://www.oxfordlearnersdictionaries.com/us/definition/american_english/abandon_1</span><br><span class="line">abandoned,http://www.oxfordlearnersdictionaries.com/us/definition/american_english/abandoned</span><br><span class="line">ability,http://www.oxfordlearnersdictionaries.com/us/definition/american_english/ability_1</span><br><span class="line">able,http://www.oxfordlearnersdictionaries.com/us/definition/american_english/able</span><br></pre></td></tr></table></figure>
<p>其中，左边是单词，右边是单词释义的链接。据我统计，这牛津三千居然有<strong>3202</strong>个词，强行增加我的记忆量，这不科学啊！</p>
<h2 id="先试着爬取一个单词的释义"><a href="#先试着爬取一个单词的释义" class="headerlink" title="先试着爬取一个单词的释义"></a>先试着爬取一个单词的释义</h2><p>故技重施，就爬<code>a</code>这个词的释义吧，我们改一下<code>url</code>这个参数就行了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a2_get_every_word_define.py - for the word 'a'</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1'</span>  <span class="comment"># 改这个</span></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">cookies = &#123;<span class="string">'oup-cookie'</span>: <span class="string">'true'</span>,</span><br><span class="line">           <span class="string">'JSESSIONID'</span>: <span class="string">'9A3D476A9725353A4CDDD5D5D0E1841B'</span>,</span><br><span class="line">           <span class="string">'__qca'</span>: <span class="string">'P0-918953595-1500593442598'</span>,</span><br><span class="line">           <span class="string">'dictionary'</span>: <span class="string">'english'</span>,</span><br><span class="line">           <span class="string">'_ga'</span>: <span class="string">'GA1.2.448180626.1500593443'</span>,</span><br><span class="line">           <span class="string">'_gid'</span>: <span class="string">'GA1.2.928219780.1500593443'</span></span><br><span class="line">           &#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line">r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers)</span><br><span class="line">soup = BeautifulSoup(r.text, <span class="string">"html5lib"</span>)</span><br><span class="line">print(soup.prettify())</span><br></pre></td></tr></table></figure>
<p>果然，全是乱七八糟的<code>Html</code>代码啊！我只想要单词释义那一部份！</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 爬下来的大概长这样 QAQ --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xml:lang</span>=<span class="string">"en"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">   a_1 indefinite article - Definition, pictures, pronunciation and usage notes | Oxford Advanced American Dictionary at OxfordLearnersDictionaries.com</span><br><span class="line">  <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"Definition of a_1 indefinite article in Oxford Advanced American Dictionary. Meaning, pronunciation, picture, example sentences, grammar, usage notes, synonyms and more."</span> <span class="attr">name</span>=<span class="string">"description"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"a_1 indefinite article, online dictionary, Oxford Advanced American Dictionary, a_1 definition, define a_1, definition of a_1, a_1 pronunciation, pronounce a_1, a_1 meaning, a_1 examples, a_1 synonyms, picture, a_1 grammar"</span> <span class="attr">name</span>=<span class="string">"keywords"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en-US"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en-MX"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en-PH"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en-BR"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1"</span> <span class="attr">hreflang</span>=<span class="string">"en-CO"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/external/styles/autocomplete.css?version=1.6.9"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">   var googletag = googletag || &#123;&#125;;</span></span><br><span class="line"><span class="undefined">            googletag.cmd = googletag.cmd || [];</span></span><br></pre></td></tr></table></figure>
<p>此时我就要安利<strong>谷歌浏览器</strong>大法好了，理论上讲使用<strong>Chromium</strong>内核的浏览器都可以像如下图这样进行操作：</p>
<p><img src="/assets/img/QQ20170722-121535.png" alt="QQ20170722-121535"></p>
<p>记下 id 啊！记下 id 啊！记下 id 啊！</p>
<p><img src="/assets/img/QQ20170722-122158.png" alt="QQ20170722-122158"></p>
<p>行吧，这时候我们就要找这个 id 报仇了！在下面的文件新增一行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a2_get_every_word_define.py - for the word 'a'</span></span><br><span class="line">print(soup.find(id=<span class="string">'entryContent'</span>))</span><br></pre></td></tr></table></figure>
<p>哈哈，我找到你了，你原来长这样啊（单词释义的<code>Html</code>版：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"a_1"</span> <span class="attr">sum</span>=<span class="string">"1605"</span>&gt;</span><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"h-g"</span> <span class="attr">id</span>=<span class="string">"a_1__1"</span> <span class="attr">psg</span>=<span class="string">"&#123;comments::a1_e_comment_2&#125;"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top-container"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top-g"</span> <span class="attr">id</span>=<span class="string">"a_1__2"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"webtop-g"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"oxford3000"</span> <span class="attr">href</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/wordlist/american_english/oxford3000/"</span>&gt;</span> <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"z"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"h"</span>&gt;</span>a<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"z"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pos"</span>&gt;</span>indefinite article<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pos-g"</span> <span class="attr">id</span>=<span class="string">"a_1__4"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pos"</span> <span class="attr">id</span>=<span class="string">"a_1__5"</span>&gt;</span>indefinite article<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pron-gs ei-g"</span> <span class="attr">eid</span>=<span class="string">"a_1__6"</span> <span class="attr">source</span>=<span class="string">"OAAD"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pron-g"</span> <span class="attr">geo</span>=<span class="string">"n_am"</span> <span class="attr">id</span>=<span class="string">"a_1__7"</span> <span class="attr">trans</span>=<span class="string">"oaad"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"phon"</span> <span class="attr">eid</span>=<span class="string">"a_1__8"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>NAmE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ə<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sound audio_play_button pron-usonly icon-audio"</span> <span class="attr">data-src-mp3</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron/a/a__/a__us/a__us_2_rr.mp3"</span> <span class="attr">data-src-ogg</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/a__/a__us/a__us_2_rr.ogg"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer"</span> <span class="attr">title</span>=<span class="string">" pronunciation American"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sep"</span>&gt;</span>,<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pron-g"</span> <span class="attr">geo</span>=<span class="string">"n_am"</span> <span class="attr">id</span>=<span class="string">"a_1__9"</span> <span class="attr">trans</span>=<span class="string">"oaad"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"phon"</span> <span class="attr">eid</span>=<span class="string">"a_1__10"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>NAmE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span>eɪ<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sound audio_play_button pron-usonly icon-audio"</span> <span class="attr">data-src-mp3</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron/a/a__/a__us/a__us_3_rr.mp3"</span> <span class="attr">data-src-ogg</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/a__/a__us/a__us_3_rr.ogg"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer"</span> <span class="attr">title</span>=<span class="string">" pronunciation American"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"v-gs"</span> <span class="attr">id</span>=<span class="string">"a_1__11"</span> <span class="attr">type</span>=<span class="string">"vs"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>(<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"prefix"</span>&gt;</span>also<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"v-g"</span> <span class="attr">id</span>=<span class="string">"a_1__12"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"v"</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>an<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pron-gs ei-g"</span> <span class="attr">eid</span>=<span class="string">"a_1__14"</span> <span class="attr">source</span>=<span class="string">"OAAD"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pron-g"</span> <span class="attr">geo</span>=<span class="string">"n_am"</span> <span class="attr">id</span>=<span class="string">"a_1__15"</span> <span class="attr">trans</span>=<span class="string">"oaad"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"phon"</span> <span class="attr">eid</span>=<span class="string">"a_1__16"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>NAmE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ən<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sound audio_play_button pron-usonly icon-audio"</span> <span class="attr">data-src-mp3</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron/a/an_/an__u/an__us_1_rr.mp3"</span> <span class="attr">data-src-ogg</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/an_/an__u/an__us_1_rr.ogg"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer"</span> <span class="attr">title</span>=<span class="string">" pronunciation American"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sep"</span>&gt;</span>,<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pron-g"</span> <span class="attr">geo</span>=<span class="string">"n_am"</span> <span class="attr">id</span>=<span class="string">"a_1__17"</span> <span class="attr">trans</span>=<span class="string">"oaad"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"phon"</span> <span class="attr">eid</span>=<span class="string">"a_1__18"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>NAmE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span>æn<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"separator"</span>&gt;</span>/<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sound audio_play_button pron-usonly icon-audio"</span> <span class="attr">data-src-mp3</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron/a/an_/an__u/an__us_2_rr.mp3"</span> <span class="attr">data-src-ogg</span>=<span class="string">"http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/an_/an__u/an__us_2_rr.ogg"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer"</span> <span class="attr">title</span>=<span class="string">" pronunciation American"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span>)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clear"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 还有好多行我就省略了。。。 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>乱七八糟的，不过我还是隐隐约约看到了一些单词发音的链接，还有单词释义。不管怎么样，先把它放在 Anki 里看看这些<code>Html</code>代码放在卡片中的样子。</p>
<p><img src="/assets/img/QQ20170722-124714.png" alt="QQ20170722-124714"></p>
<p>虽然我已经做好心理准备了，但是为什么，为什么（哭）</p>
<p>罢了，这也不是<code>Html</code> 的锅，我们先把每个单词的<code>Html</code>代码全爬下来吧～</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get_word_define.py</span></span><br><span class="line"><span class="keyword">import</span> htmlmin</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># url = 'http://www.oxfordlearnersdictionaries.com/us/definition/american_english/a_1'</span></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">cookies = &#123;<span class="string">'oup-cookie'</span>: <span class="string">'true'</span>, <span class="string">'JSESSIONID'</span>: <span class="string">'9A3D476A9725353A4CDDD5D5D0E1841B'</span>,</span><br><span class="line">           <span class="string">'__qca'</span>: <span class="string">'P0-918953595-1500593442598'</span>, <span class="string">'dictionary'</span>: <span class="string">'english'</span>,</span><br><span class="line">           <span class="string">'_ga'</span>: <span class="string">'GA1.2.448180626.1500593443'</span>,</span><br><span class="line">           <span class="string">'_gid'</span>: <span class="string">'GA1.2.928219780.1500593443'</span></span><br><span class="line">           &#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) '</span></span><br><span class="line">                         <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># read word list</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'oxford_3000_&lt;a&gt;.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    oxford_3000 = file.readlines()</span><br><span class="line">print(oxford_3000[:<span class="number">5</span>])</span><br><span class="line">print(len(oxford_3000))</span><br><span class="line"></span><br><span class="line"><span class="comment"># start from last runtime</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'oxford_3000_html.txt'</span>, <span class="string">'r+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        oxford_3000_html_finished = file.readlines()</span><br><span class="line">    start = len(oxford_3000_html_finished)</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    start = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for x in range(0, len(oxford_3000[:5])):  # first five lines</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(start, len(oxford_3000)):  <span class="comment"># from start to end</span></span><br><span class="line">    word = oxford_3000[x].split(<span class="string">','</span>)[<span class="number">0</span>]</span><br><span class="line">    url = oxford_3000[x].split(<span class="string">','</span>)[<span class="number">1</span>].replace(<span class="string">'\n'</span>, <span class="string">''</span>)</span><br><span class="line">    r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers)</span><br><span class="line">    soup = BeautifulSoup(r.text, <span class="string">"html5lib"</span>)</span><br><span class="line">    <span class="comment"># print(soup.prettify())</span></span><br><span class="line">    <span class="comment"># print(soup.find(id='entryContent'))</span></span><br><span class="line">    html = htmlmin.minify(str(soup.find(id=<span class="string">'entryContent'</span>)).replace(<span class="string">'\n'</span>, <span class="string">''</span>),</span><br><span class="line">                          remove_empty_space=<span class="keyword">False</span>,</span><br><span class="line">                          remove_optional_attribute_quotes=<span class="keyword">False</span>)</span><br><span class="line">    output = word + <span class="string">u'ㅋ'</span> + html</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'oxford_3000_html.txt'</span>, <span class="string">'a+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        print(output)</span><br><span class="line">        file.writelines(output + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<p>爬取到<code>oxford_3000_html.txt</code>即可。注意我们使用了<code>htmlmin.minify</code>方法压缩代码至一行。下面是文件的前五行：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># oxford_3000_html.txt</span><br><span class="line">aㅋ<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"a_1"</span> <span class="attr">sum</span>=<span class="string">"1605"</span>&gt;</span></span><br><span class="line">abandonㅋ<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"abandon_1"</span> <span class="attr">subentrynum</span>=<span class="string">"1"</span> <span class="attr">sum</span>=<span class="string">"1210"</span>&gt;</span></span><br><span class="line">abandonedㅋ<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"abandoned"</span> <span class="attr">psg</span>=<span class="string">"iskills:y"</span> <span class="attr">sum</span>=<span class="string">"309"</span>&gt;</span></span><br><span class="line">abilityㅋ<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"ability_1"</span> <span class="attr">sum</span>=<span class="string">"670"</span>&gt;</span></span><br><span class="line">ableㅋ<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"entryContent"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"entry"</span> <span class="attr">dict</span>=<span class="string">"oaad"</span> <span class="attr">id</span>=<span class="string">"able"</span> <span class="attr">sum</span>=<span class="string">"537"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>ㅋ</code>前面是单词，后面是单词释义。我使用<code>ㅋ</code>作为分隔符的原因是它是一个韩文字符，不会出现在牛津这本词典中。</p>
<h2 id="选择模板"><a href="#选择模板" class="headerlink" title="选择模板"></a>选择模板</h2><p>让我们从失恋的悲伤中走出来，先戴个绿帽子，调一调<code>Css</code>样式表吧～</p>
<p>嗯。经过长时间的折腾，我还是觉得网页自带的样式表贼好看，便无耻的抄袭下来（手动滑稽</p>
<p><img src="/assets/img/QQ20170722-163808.png" alt="QQ20170722-163808"></p>
<p>所以我找到了官方的 Css 文件，直接抄袭下来（额</p>
<p><img src="/assets/img/QQ20170724-154451.png" alt="QQ20170724-154451"></p>
<p>接下来把 Css 文件复制到 Anki Card Types 看看效果</p>
<p><img src="/assets/img/QQ20170724-154901.png" alt="QQ20170724-154901"></p>
<p>再补一张效果图：</p>
<p><img src="/assets/img/QQ20170724-155824.png" alt="QQ20170724-155824"></p>
<h2 id="调整细节"><a href="#调整细节" class="headerlink" title="调整细节"></a>调整细节</h2><p>根据上面的尝试，我们已经发现了诸多问题。于是我们先把图片下载下来。图片很隐蔽，藏在<code>Css</code>文件里。我们先通过复制粘贴的办法分别将<code>oxford.css</code> <code>interface.css</code> <code>card.css</code>搞下来。什么，你不知道怎么复杂？哎呀，我没有说，你看到我上面几张图拿方框圈起来的部分了吗？该点击的点击，该复制的复制，该粘贴的粘贴。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a3_get_images_in_css_file.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">cookies = &#123;<span class="string">'oup-cookie'</span>: <span class="string">'true'</span>, <span class="string">'JSESSIONID'</span>: <span class="string">'9A3D476A9725353A4CDDD5D5D0E1841B'</span>,</span><br><span class="line">           <span class="string">'__qca'</span>: <span class="string">'P0-918953595-1500593442598'</span>, <span class="string">'dictionary'</span>: <span class="string">'english'</span>,</span><br><span class="line">           <span class="string">'_ga'</span>: <span class="string">'GA1.2.448180626.1500593443'</span>,</span><br><span class="line">           <span class="string">'_gid'</span>: <span class="string">'GA1.2.928219780.1500593443'</span></span><br><span class="line">           &#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) '</span></span><br><span class="line">                         <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_css</span><span class="params">(*args, download: bool)</span>:</span>  <span class="comment"># which_css.css</span></span><br><span class="line">    <span class="keyword">for</span> which_css <span class="keyword">in</span> args:</span><br><span class="line">        print(which_css)</span><br><span class="line">        <span class="string">"""Step 1: Get resource list and Covert href-links to Anki's style"""</span></span><br><span class="line">        <span class="keyword">with</span> open(which_css, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">            css = file.read()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Use Regex to get Images List</span></span><br><span class="line">        files = re.findall(<span class="string">r'url\("?../images/(.*?)"?\)'</span>, css)</span><br><span class="line">        print(len(files))</span><br><span class="line"></span><br><span class="line">        prefix = <span class="string">'_us-oxford-learners-dict-images-'</span>  <span class="comment"># Use char '_' and Fucking Anki!</span></span><br><span class="line">        <span class="string">""" https://apps.ankiweb.net/docs/manual.html#media-&amp;-latex-references</span></span><br><span class="line"><span class="string">        Anki Docs: The underscore tells Anki that the file is used by the template and it should be exported when sharing the deck.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">repl</span><span class="params">(match_obj)</span>:</span>  <span class="comment"># You can use lambda here.</span></span><br><span class="line">            print(match_obj)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'url("'</span> + prefix + match_obj[<span class="number">1</span>].replace(<span class="string">'/'</span>, <span class="string">'-'</span>).replace(<span class="string">'_'</span>, <span class="string">'-'</span>) + <span class="string">'")'</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Replace css file's image link with Anki Style</span></span><br><span class="line">        css = re.sub(<span class="string">r'url\("?../images/(.*?)"?\)'</span>, repl, css)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'collection.media'</span>):</span><br><span class="line">            os.mkdir(<span class="string">'collection.media'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="string">'''Step 2: Downloads all images '''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">            url = <span class="string">'http://www.oxfordlearnersdictionaries.com/us/external/images/'</span> + i</span><br><span class="line">            name = prefix + i.replace(<span class="string">'/'</span>, <span class="string">'-'</span>).replace(<span class="string">'_'</span>, <span class="string">'-'</span>)</span><br><span class="line">            print(name + <span class="string">'\t'</span> + url)</span><br><span class="line">            <span class="keyword">if</span> download:  <span class="comment"># downloading...</span></span><br><span class="line">                r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers, stream=<span class="keyword">True</span>)</span><br><span class="line">                <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">                    <span class="keyword">with</span> open(<span class="string">'collection.media/'</span> + name, <span class="string">'wb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">                        r.raw.decode_content = <span class="keyword">True</span></span><br><span class="line">                        shutil.copyfileobj(r.raw, file)</span><br><span class="line"></span><br><span class="line">        <span class="string">'''Step 3: Save new css-style file to "a/which_css.css" '''</span></span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'a/'</span> + which_css, <span class="string">'w+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">            file.write(css)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy_collection_media_to</span><span class="params">(dst: str)</span>:</span></span><br><span class="line">    src = <span class="string">'collection.media'</span></span><br><span class="line">    <span class="comment"># shutil.copytree(src=src, dst=dst)</span></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(src):</span><br><span class="line">        file_name = os.path.join(src, file)</span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(file_name):</span><br><span class="line">            shutil.copy2(src=file_name, dst=dst)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    get_css(<span class="string">'oxford.css'</span>, download=<span class="keyword">True</span>)</span><br><span class="line">    get_css(<span class="string">'interface.css'</span>, download=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># get_css('oxford.css', 'interface.css', download=False)  # update css file after you modify the css file</span></span><br><span class="line">    copy_collection_media_to(<span class="string">'a'</span>)</span><br></pre></td></tr></table></figure>
<p>下载完图片之后，接下来我们要对字体动手了。同样的方法，不多讲。你只需要注意的是，字体文件的链接藏在<code>interface.css</code>文件的前几行。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">interface</span><span class="selector-class">.css</span></span><br><span class="line">@<span class="keyword">import</span> url(https://fonts.googleapis.com/css?family=Merriweather:<span class="number">700</span>,<span class="number">700</span>italic,<span class="number">300</span>,<span class="number">300</span>italic|Open+Sans:<span class="number">400</span>,<span class="number">600</span>,<span class="number">400</span>italic,<span class="number">600</span>italic);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*------------------------------------*\</span></span><br><span class="line"><span class="comment">    GLOBAL STYLES</span></span><br><span class="line"><span class="comment">\*------------------------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">fonts</span></span><br><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'oup-icons'</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">"../fonts/oup-icons.eot"</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">"../fonts/oup-icons.eot?#iefix"</span>) <span class="built_in">format</span>(<span class="string">'embedded-opentype'</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">"../fonts/oup-icons.ttf"</span>) <span class="built_in">format</span>(<span class="string">'truetype'</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">"../fonts/oup-icons.woff"</span>) <span class="built_in">format</span>(<span class="string">'woff'</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">"../fonts/oup-icons.svg#oup-icons"</span>) <span class="built_in">format</span>(<span class="string">'svg'</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下载字体的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a4_get_font_of_interface_css.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) '</span></span><br><span class="line">                         <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_font</span><span class="params">(download: bool)</span>:</span></span><br><span class="line">    <span class="string">"""Step 1: Get resource list and Covert href-links to Anki's style"""</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'a/interface.css'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        interface = file.read()</span><br><span class="line">    url = re.findall(<span class="string">r'@import url\((.*?)\);'</span>, interface)[<span class="number">0</span>]</span><br><span class="line">    r = requests.get(url=url, proxies=proxies, headers=headers)</span><br><span class="line">    files = re.findall(<span class="string">r'url\("?(.*?)"?\)'</span>, r.text)</span><br><span class="line"></span><br><span class="line">    prefix = <span class="string">'_us-oxford-learners-dict-fonts-'</span>  <span class="comment"># Use char '_' and Fucking Anki!</span></span><br><span class="line">    <span class="string">""" https://apps.ankiweb.net/docs/manual.html#media-&amp;-latex-references</span></span><br><span class="line"><span class="string">    Anki Docs: The underscore tells Anki that the file is used by the template and it should be exported when sharing the deck.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">repl</span><span class="params">(match_obj)</span>:</span>  <span class="comment"># You can use lambda here.</span></span><br><span class="line">        print(match_obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'url("'</span> + prefix + match_obj[<span class="number">1</span>].replace(<span class="string">'https://fonts.gstatic.com/s/'</span>, <span class="string">''</span>).replace(<span class="string">'/'</span>, <span class="string">'-'</span>).replace(<span class="string">'_'</span>, <span class="string">'-'</span>) + <span class="string">'")'</span></span><br><span class="line"></span><br><span class="line">    font = re.sub(<span class="string">r'url\("?(.*?)"?\)'</span>, repl, r.text)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'collection.media'</span>):</span><br><span class="line">        os.mkdir(<span class="string">'collection.media'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="string">'''Step 2: Downloads all fonts '''</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">        url = i</span><br><span class="line">        name = prefix + i.replace(<span class="string">'https://fonts.gstatic.com/s/'</span>, <span class="string">''</span>).replace(<span class="string">'/'</span>, <span class="string">'-'</span>).replace(<span class="string">'_'</span>, <span class="string">'-'</span>)</span><br><span class="line">        print(name + <span class="string">'\t'</span> + url)</span><br><span class="line">        <span class="keyword">if</span> download:  <span class="comment"># downloading...</span></span><br><span class="line">            r = requests.get(url=url, proxies=proxies, headers=headers, stream=<span class="keyword">True</span>)</span><br><span class="line">            <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">                <span class="keyword">with</span> open(<span class="string">'collection.media/'</span> + name, <span class="string">'wb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">                    r.raw.decode_content = <span class="keyword">True</span></span><br><span class="line">                    shutil.copyfileobj(r.raw, file)</span><br><span class="line"></span><br><span class="line">    <span class="string">'''Step 3: Save new css-style file to "a/which_css.css" '''</span></span><br><span class="line">    interface = font + <span class="string">'.icon-tick:before &#123;'</span> + interface.split(<span class="string">'.icon-tick:before &#123;'</span>)[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'a/interface.css'</span>, <span class="string">'w+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        file.write(interface)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># get_font(download=False)</span></span><br><span class="line">    get_font(download=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>下载完字体后，我们对三个<code>Css</code>文件进行合并，最终的样式表文件就叫<code>z_oxford.css</code>吧。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a5_merge_three_css.py</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a/interface.css'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    interface = file.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'a/oxford.css'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    oxford = file.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'card.css'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    card = file.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'z_oxford.css'</span>, <span class="string">'w+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(card)</span><br><span class="line">    file.write(interface)</span><br><span class="line">    file.write(oxford)</span><br></pre></td></tr></table></figure>
<p>样式表算是做完了，就差声音了。在下面这个脚本中，我也对卡片样式进行了微调，调整对部分在看代码注释就行了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a6_get_audio_ogg.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> a3_get_images_in_css_file <span class="keyword">import</span> copy_collection_media_to</span><br><span class="line"></span><br><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://127.0.0.1:1087'</span>, <span class="string">'https'</span>: <span class="string">'http://127.0.0.1:1087'</span>&#125;</span><br><span class="line">cookies = &#123;<span class="string">'oup-cookie'</span>: <span class="string">'true'</span>, <span class="string">'JSESSIONID'</span>: <span class="string">'9A3D476A9725353A4CDDD5D5D0E1841B'</span>,</span><br><span class="line">           <span class="string">'__qca'</span>: <span class="string">'P0-918953595-1500593442598'</span>, <span class="string">'dictionary'</span>: <span class="string">'english'</span>,</span><br><span class="line">           <span class="string">'_ga'</span>: <span class="string">'GA1.2.448180626.1500593443'</span>,</span><br><span class="line">           <span class="string">'_gid'</span>: <span class="string">'GA1.2.928219780.1500593443'</span></span><br><span class="line">           &#125;</span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) '</span></span><br><span class="line">                         <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/55.0.2883.95 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_audio</span><span class="params">(file_name: str)</span>:</span></span><br><span class="line">    print(<span class="string">'Getting Audio:'</span>)</span><br><span class="line">    <span class="keyword">with</span> open(file_name, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        oxford_3000_html = file.readlines()</span><br><span class="line"></span><br><span class="line">    prefix = <span class="string">'us-oxford-learners-dict-audio-'</span>  <span class="comment"># Don't use char '_' and Fucking Anki!</span></span><br><span class="line"></span><br><span class="line">    os.remove(<span class="string">'z_oxford.txt'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> oxford_3000_html:</span><br><span class="line">        soup = BeautifulSoup(i.split(<span class="string">'ㅋ'</span>)[<span class="number">1</span>].replace(<span class="string">'\n'</span>, <span class="string">''</span>), <span class="string">"html5lib"</span>)</span><br><span class="line">        sound = soup.find_all(<span class="string">'div'</span>, class_=<span class="string">'audio_play_button'</span>)</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        srcs = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> sound:</span><br><span class="line">            <span class="string">'''A Card may have more than one Audio'''</span></span><br><span class="line">            <span class="comment"># print(j)</span></span><br><span class="line">            <span class="comment"># mp3 = j.get('data-src-mp3')</span></span><br><span class="line">            ogg = j.get(<span class="string">'data-src-ogg'</span>)</span><br><span class="line">            id_ = <span class="string">'audio'</span> + str(count)</span><br><span class="line">            src = prefix + ogg.split(<span class="string">'/'</span>)[<span class="number">-1</span>:][<span class="number">0</span>].replace(<span class="string">'/'</span>, <span class="string">'-'</span>).replace(<span class="string">'_'</span>, <span class="string">'-'</span>)</span><br><span class="line">            srcs.extend([src])</span><br><span class="line">            onclick = <span class="string">"document.getElementById('"</span> + id_ + <span class="string">"').play()"</span></span><br><span class="line"></span><br><span class="line">            <span class="string">'''Add &lt;button&gt; Tag'''</span></span><br><span class="line">            a = soup.new_tag(<span class="string">'a'</span>, onclick=onclick, style=j.get(<span class="string">'style'</span>),</span><br><span class="line">                             title=j.get(<span class="string">'title'</span>), valign=j.get(<span class="string">'valign'</span>))</span><br><span class="line">            a[<span class="string">'class'</span>] = j.get(<span class="string">'class'</span>)</span><br><span class="line">            j.insert_after(a)</span><br><span class="line"></span><br><span class="line">            <span class="string">'''Add &lt;audio&gt; Tag'''</span></span><br><span class="line">            j.name = <span class="string">'audio'</span></span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'class'</span>]</span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'style'</span>]</span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'title'</span>]</span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'valign'</span>]</span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'data-src-mp3'</span>]</span><br><span class="line">            <span class="keyword">del</span> j[<span class="string">'data-src-ogg'</span>]</span><br><span class="line">            j[<span class="string">'id'</span>] = id_</span><br><span class="line">            j[<span class="string">'src'</span>] = src</span><br><span class="line"></span><br><span class="line">            <span class="string">'''Writing Download List to TXT File'''</span></span><br><span class="line">            <span class="comment"># print(','.join([src, mp3, ogg]))</span></span><br><span class="line">            print(<span class="string">','</span>.join([src, ogg]))</span><br><span class="line">            <span class="keyword">with</span> open(<span class="string">'oxford_3000_&lt;audio&gt;.txt'</span>, <span class="string">'a+'</span>) <span class="keyword">as</span> file:</span><br><span class="line">                file.write(<span class="string">','</span>.join([src, ogg]))</span><br><span class="line">                file.write(<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="string">'''Fix some bugs on html and Fucking Anki's "JS" "Support" '''</span></span><br><span class="line">        headings = soup.select(<span class="string">'span[class="heading"]'</span>)</span><br><span class="line">        <span class="keyword">for</span> heading <span class="keyword">in</span> headings:</span><br><span class="line">            heading[<span class="string">'onclick'</span>] = <span class="string">"this.parentElement.classList.toggle('is-active');"</span></span><br><span class="line"></span><br><span class="line">        <span class="string">'''Writing Anki Cards which were changed for Card's Audio'''</span></span><br><span class="line">        <span class="comment"># print(soup)</span></span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'z_oxford.txt'</span>, <span class="string">'a+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">            file.write(<span class="string">'ㅋ'</span>.join([str(soup.select(<span class="string">'div[class="top-container"]'</span>)[<span class="number">0</span>]), str(soup.select(<span class="string">'body'</span>)[<span class="number">0</span>])]))</span><br><span class="line">            file.write(<span class="string">'ㅋ'</span>)</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> srcs:</span><br><span class="line">                file.write(<span class="string">'[sound:'</span> + k + <span class="string">']'</span>)</span><br><span class="line">            file.write(<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_all_audio</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'oxford_3000_&lt;audio&gt;.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        files = file.readlines()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">        url = i.split(<span class="string">','</span>)[<span class="number">1</span>].replace(<span class="string">'\n'</span>, <span class="string">''</span>)</span><br><span class="line">        name = i.split(<span class="string">','</span>)[<span class="number">0</span>]</span><br><span class="line">        print(name + <span class="string">'\t'</span> + url)</span><br><span class="line">        r = requests.get(url=url, proxies=proxies, cookies=cookies, headers=headers, stream=<span class="keyword">True</span>)</span><br><span class="line">        <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">with</span> open(<span class="string">'collection.media/'</span> + name, <span class="string">'wb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">                r.raw.decode_content = <span class="keyword">True</span></span><br><span class="line">                shutil.copyfileobj(r.raw, file)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    get_audio(<span class="string">'oxford_3000_html.txt'</span>)</span><br><span class="line">    download_all_audio()</span><br><span class="line">    <span class="comment"># copy_collection_media_to('a')</span></span><br><span class="line">    copy_collection_media_to(<span class="string">'/Users/acbetter/Library/Application Support/Anki2/User 1/collection.media'</span>)</span><br></pre></td></tr></table></figure>
<p>在这个过程中，我们顺便生成了音频下载的列表：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># oxford_3000_&lt;audio&gt;.txt</span></span><br><span class="line">us-oxford-learners-dict-images-a--us-2-rr.ogg,http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/a__/a__us/a__us_2_rr.ogg</span><br><span class="line">us-oxford-learners-dict-images-a--us-3-rr.ogg,http://www.oxfordlearnersdictionaries.com/us/media/american_english/us_pron_ogg/a/a__/a__us/a__us_3_rr.ogg</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>也生成了最终要导入到 Anki 的文件：<code>z_oxford.txt</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># z_oxford.txt</span></span><br><span class="line">单词1ㅋ单词1释义ㅋ单词1音频</span><br><span class="line">单词2ㅋ单词2释义ㅋ单词2音频</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>同时也把所有资源文件下载到<code>collection.media</code>文件夹。如果你用的是<code>Mac</code>的话，这些资源也顺便复制到了 Anki 目录下。</p>
<h2 id="导入到-Anki"><a href="#导入到-Anki" class="headerlink" title="导入到 Anki"></a>导入到 Anki</h2><p>像其他词库一样照常导入就行了。<strong>注意：我用的分隔符是<code>ㅋ</code>。</strong></p>
<p><img src="/assets/img/QQ20170729-131731.png" alt="QQ20170729-131731"></p>
<p>完结！撒花～</p>
<blockquote>
<p>170729 by acbetter</p>
</blockquote>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/教程/">#教程</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Anki/">#Anki</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2018/06/04/PyQt5 and Qt Designer 混合编程教程/">PyQt5 and Qt Designer 混合编程教程</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2017/07/13/人生有梦 各自精彩/">人生有梦 各自精彩</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5b1968b08e56ee0011c80452&amp;product=inline-share-buttons' async='async'></script>

</div>



<div class="comments">
    <h3 class="title is-4">评论（需挂代理软件加载）</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://acbetter.com/2017/07/22/如何动手打造属于自己的ANKI牌组（编程向）之牛津基本三千词/';
        this.page.identifier = '2017/07/22/如何动手打造属于自己的ANKI牌组（编程向）之牛津基本三千词/';
        
        this.language = 'zh';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'acbetter' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2018 AC Better&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" href="https://github.com/acbetter">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        //plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120519766-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-120519766-1');
</script>


    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>